FROM jiahaolin69/nginx

# Instalar dependencias básicas y Node.js LTS (v20.x) desde NodeSource
RUN apt-get update && apt-get install -yq --no-install-recommends \
    curl \
    gnupg \
    ca-certificates \
    && curl -fsSL https://deb.nodesource.com/setup_20.x | bash - \
    && apt-get install -yq --no-install-recommends \
    nodejs \
    && apt-get clean && rm -rf /var/lib/apt/lists/*

# Verificar versión (útil durante el build para confirmar)
RUN node -v && npm -v

RUN mkdir -p /root/admin/node
RUN mkdir -p /root/admin/node/proyectos/pmegacrossover
WORKDIR /root/admin/node
COPY ./proyectos/pmegacrossover/Web-Practica1-JiaHao/ /root/admin/node/proyectos/pmegacrossover

COPY ./dockerfiles/node/admin/start.sh .
RUN chmod +x /root/admin/node/start.sh

ENTRYPOINT [ "./start.sh" ]